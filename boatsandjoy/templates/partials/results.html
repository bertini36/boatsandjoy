{% load i18n static %}

<section id="results" v-show="show_results">

    <div class="row">
        <div class="col-sm-12">
            <div id="results-modal" class="modal-lg" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-xl" role="document">
                    <div class="modal-content">
                        <div class="modal-header text-center">
                            <h5 class="modal-title w-100">{% trans 'Results' %}</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                                    @click="restart_search()">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">

                            <nav class="nav nav-pills flex-column flex-sm-row" v-if="available_boats.length > 1">
                                <a class="flex-sm-fill text-sm-center nav-link" data-toggle="pill" role="tab"
                                   v-for="(boat, index) in available_boats"
                                   :href="'#boat_' + boat.id"
                                   :class="{ 'show active': index === 0 }">
                                    [[ boat.name ]]
                                </a>
                            </nav>

                            <div id="results_nav_items" class="tab-content">
                                <div class="tab-pane fade" role="tabpanel" aria-labelledby="pills-home-tab"
                                     v-for="(boat, index) in available_boats"
                                     :id="'boat_' + boat.id"
                                     :class="{ 'show active': index === 0 }"
                                     @click="set_boat(boat)">
                                    <div class="row" style="padding-top: 3%">

                                        <div id="boat_description_block" class="col-sm-6">
                                            <h4><strong>[[ boat.name ]]</strong></h4>
                                            <p v-html="boat.description"></p>
                                        </div>

                                        <div class="col-sm-6">

                                            {% include 'partials/carousel.html' %}

                                            <div id="slots_selection_section" style="margin-top: 5%">
                                                <h5>{% trans 'Availability for' %} [[ selected_date_formatted ]]</h5>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <label class="input-group-text" for="inputGroupSelect01">
                                                            {% trans 'Options' %}
                                                        </label>
                                                    </div>
                                                    <select id="slots_selector" class="custom-select">
                                                        <option value="">{% trans 'Select a pricing option' %}</option>
                                                        <option v-for="availability_option in boat.availability"
                                                                :price="[[ availability_option.price ]]"
                                                                :slot_ids="get_slot_ids(availability_option.slots)">
                                                            From [[ availability_option.from_hour ]] to [[
                                                            availability_option.to_hour ]] ([[ availability_option.price
                                                            ]]â‚¬)
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div style="margin-top: 3%">
                                                <ul class="list-inline">
                                                    <li>
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" v-model="apply_resident_discount" @change="updatePrices">
                                                                &nbsp;&nbsp;{% trans 'I am a resident of the Balearic Islands' %}
                                                            </label>
                                                        </div>
                                                        <div class="alert alert-warning" v-if="apply_resident_discount">
                                                            {% blocktrans %}
                                                                If you mark this checkbox you are having a special discount then
                                                                you have to give some evidence of your residence in Mallorca.
                                                                Otherwise this offer will not have any effect and the original price will be applied.
                                                            {% endblocktrans %}
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" v-model="legal_advice_accepted">
                                                                &nbsp;&nbsp;Accept <a href="{% static 'aviso_legal.pdf' %}" target="_blank">{% trans 'legal advice' %}</a>
                                                            </label>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" v-model="terms_and_conditions_accepted">
                                                                &nbsp;&nbsp;Accept <a href="{% static 'terminos_y_condiciones.pdf' %}" target="_blank">{% trans 'terms and conditions' %}</a>
                                                            </label>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div style="margin-top: 3%">
                                                <h4>{% trans 'Your contact information' %}</h4>
                                                <div class="form-group">
                                                    <label>Name</label>
                                                    <input type="text" v-model="customer_name" class="form-control" placeholder="{% trans 'Introduce your name' %}">
                                                </div>
                                                <div class="form-group">
                                                    <label>Telephone number</label>
                                                    <input type="text" v-model="customer_telephone_number" class="form-control" placeholder="{% trans 'Introduce your telephone number' %}">
                                                </div>
                                            </div>
                                            <div id="pay_button_section">
                                                <button id="pay_button" type="button"
                                                        class="btn btn-primary btn-lg btn-block"
                                                        @click="go_to_pay()" style="margin-top: 5%">
                                                    {% trans 'Pay with credit card' %}
                                                    <img src="{% static 'img/stripe_logo.png' %}" width="10%" alt="">
                                                </button>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% include 'modals/photo_modal.html' %}

</section>
